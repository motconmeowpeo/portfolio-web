<div class="blog w-full max-w-7xl m-auto mt-20">

    <ng-container *ngIf="!isLoading; else loadingTemplate">
        <ng-container *ngIf="contacts$ | async as contacts">
            <ng-container *ngIf="contacts.length; else noPost">
                <div class="mt-20 w-full">
                    <div class="grid grid-cols-3 gap-8">
                        <table class="w-full table-auto border border-primary">
                            <thead>
                                <tr class="border text-left sticky text- top-0 bg-primary text-white">
                                    <th class="px-4 py-2 w-[10%]">User</th>
                                    <th class="px-4 py-2 w-[10%]">Email</th>
                                    <th class="px-4 py-2 truncate w-[10%]">Phone Number</th>
                                    <th class="px-4 py-2 truncate w-[10%]">Create Date</th>
                                    <th class="px-4 py-2 w-[10%]">Resolve</th>
                                    <th class="px-4 py-2 truncate w-[10%]">Resolve Date</th>
                                    <th class="px-4 py-2 w-[40%]">Message</th>
                                    <!-- <th></th> -->
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="cursor-pointer relative w-full" *ngFor="let item of contacts; even as isEven"
                                    [ngClass]="isEven ? 'bg-white' : 'bg-gray-100'">
                                    <td class="px-4 py-2 truncate w-[10%]">{{ item.name }}</td>
                                    <td class="px-4 py-2 truncate w-[10%]">{{ item.email }}</td>
                                    <td class="px-4 py-2 truncate w-[10%]">{{ item.phone }}</td>
                                    <td class="px-4 py-2 truncate w-[10%]">{{ formatDate(item.createAt) }}</td>
                                    <td class="px-4 py-2 truncate w-[10%]">{{
                                        item.resolved?'Resolved':'Not Yet Resolved'
                                        }}
                                    </td>
                                    <td class="px-4 py-2 truncate w-[10%]">{{ formatDate(item.resolvedAt) || "-" }}</td>
                                    <td class="px-4 py-2 max-w-[40%] truncate">{{ item.message}}</td>


                                    <div class="absolute bottom-[2px] right-2" *>
                                        <app-menu position="right">
                                            <!-- Trigger -->
                                            <i class="flex items-center justify-center p-1 cursor-pointer w-6 h-6 rounded hover:bg-background-2"
                                                menuTrigger>
                                                <svg width="30" height="15" viewBox="0 0 30 13" fill="none"
                                                    xmlns="http://www.w3.org/2000/svg" class="text-lg">
                                                    <g filter="url(#filter0_d_2_6)">
                                                        <path
                                                            d="M5 2.5C5 2.89782 5.1317 3.27936 5.36612 3.56066C5.60054 3.84196 5.91848 4 6.25 4C6.58152 4 6.89946 3.84196 7.13388 3.56066C7.3683 3.27936 7.5 2.89782 7.5 2.5C7.5 2.10218 7.3683 1.72064 7.13388 1.43934C6.89946 1.15804 6.58152 1 6.25 1C5.91848 1 5.60054 1.15804 5.36612 1.43934C5.1317 1.72064 5 2.10218 5 2.5ZM13.75 2.5C13.75 2.89782 13.8817 3.27936 14.1161 3.56066C14.3505 3.84196 14.6685 4 15 4C15.3315 4 15.6495 3.84196 15.8839 3.56066C16.1183 3.27936 16.25 2.89782 16.25 2.5C16.25 2.10218 16.1183 1.72064 15.8839 1.43934C15.6495 1.15804 15.3315 1 15 1C14.6685 1 14.3505 1.15804 14.1161 1.43934C13.8817 1.72064 13.75 2.10218 13.75 2.5ZM22.5 2.5C22.5 2.89782 22.6317 3.27936 22.8661 3.56066C23.1005 3.84196 23.4185 4 23.75 4C24.0815 4 24.3995 3.84196 24.6339 3.56066C24.8683 3.27936 25 2.89782 25 2.5C25 2.10218 24.8683 1.72064 24.6339 1.43934C24.3995 1.15804 24.0815 1 23.75 1C23.4185 1 23.1005 1.15804 22.8661 1.43934C22.6317 1.72064 22.5 2.10218 22.5 2.5Z"
                                                            stroke="white" stroke-width="2" stroke-linecap="round"
                                                            stroke-linejoin="round" shape-rendering="crispEdges" />
                                                    </g>
                                                    <defs>
                                                        <filter id="filter0_d_2_6" x="0" y="0" width="30" height="13"
                                                            filterUnits="userSpaceOnUse"
                                                            color-interpolation-filters="sRGB">
                                                            <feFlood flood-opacity="0" result="BackgroundImageFix" />
                                                            <feColorMatrix in="SourceAlpha" type="matrix"
                                                                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                                                                result="hardAlpha" />
                                                            <feOffset dy="4" />
                                                            <feGaussianBlur stdDeviation="2" />
                                                            <feComposite in2="hardAlpha" operator="out" />
                                                            <feColorMatrix type="matrix"
                                                                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                                                            <feBlend mode="normal" in2="BackgroundImageFix"
                                                                result="effect1_dropShadow_2_6" />
                                                            <feBlend mode="normal" in="SourceGraphic"
                                                                in2="effect1_dropShadow_2_6" result="shape" />
                                                        </filter>
                                                    </defs>
                                                </svg>
                                            </i>

                                            <!-- Menu -->
                                            <ul class="flex flex-col bg-white shadow-base p-1 rounded text-xs"
                                                menuContent>
                                                <ng-container>
                                                    <!-- Edit -->
                                                    <li
                                                        class="inline-flex items-center px-3 py-2 cursor-pointer rounded hover:bg-background-2">
                                                        <fa-icon class="mr-2" [icon]="faPen"></fa-icon>
                                                        <span class="whitespace-nowrap"> Resolved</span>
                                                    </li>


                                                </ng-container>
                                            </ul>
                                        </app-menu>
                                    </div>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </ng-container>
        </ng-container>
        <ng-template #noPost>
            <div class="text-lg text-white mt-20 w-full flex justify-center">
                You have no post
            </div>
        </ng-template>
    </ng-container>
    <ng-template #loadingTemplate>
        <div class="mt-20 w-full flex justify-center">
            <app-loading></app-loading>
        </div>
    </ng-template>
</div>
<div class="py-20 bg-header-color mt-20">
    <app-footer (goToSend)="gotoSendMessage()"></app-footer>
</div>