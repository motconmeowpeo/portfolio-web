<div class="post relative group border border-border-color">
  <section class="flex relative group cursor-pointer" [routerLink]="['/post/' + post.id]">
    <div class="image h-96 w-full">
      <img *ngIf="post.images && post.images?.length" [src]="URL_IMAGE + post.images[0]" alt=""
        class="h-full w-full overflow-hidden object-cover" />
      <img *ngIf="!post.images || !post.images.length" src="assets/common/news-1.webp" alt=""
        class="h-full w-full overflow-hidden object-cover" />
    </div>
    <div
      class="overlay absolute top-0 bottom-0 left-0 right-0 bg-black opacity-70 z-1 group-hover:opacity-90 duration-300 transition-all">
    </div>
    <div class="info flex flex-col ml-2 justify-between top-0 left-0 bottom-0 right-0 absolute p-4">
      <div class="flex flex-col justify-center h-full ">
        <ng-container *ngIf="isLoading; else elseTemplate">
          <div class="h-full w-full flex items-center justify-center">
            <app-loading-small></app-loading-small>
          </div>
        </ng-container>
        <ng-template #elseTemplate>
          <span class="text-white-text text-xl font-semibold self-center line-clamp-2">{{ post.title }}</span>
        </ng-template>
      </div>
      <div class="flex justify-between w-full">
        <div class="text-white-text text-sm">
          <fa-icon [icon]="faUser"></fa-icon>
          <span class="ml-2">{{ post.createBy }}</span>
        </div>
        <div class="text-white text-xs">{{ formatDate(post.createAt) }}</div>
      </div>
    </div>
    <div class="absolute hidden group-hover:block top-2 right-2" *ngIf="user$ | async">
      <app-menu position="right">
        <!-- Trigger -->
        <i class="flex items-center justify-center p-1 cursor-pointer w-6 h-6 rounded hover:bg-background-2"
          menuTrigger>
          <svg width="30" height="15" viewBox="0 0 30 13" fill="none" xmlns="http://www.w3.org/2000/svg"
            class="text-lg">
            <g filter="url(#filter0_d_2_6)">
              <path
                d="M5 2.5C5 2.89782 5.1317 3.27936 5.36612 3.56066C5.60054 3.84196 5.91848 4 6.25 4C6.58152 4 6.89946 3.84196 7.13388 3.56066C7.3683 3.27936 7.5 2.89782 7.5 2.5C7.5 2.10218 7.3683 1.72064 7.13388 1.43934C6.89946 1.15804 6.58152 1 6.25 1C5.91848 1 5.60054 1.15804 5.36612 1.43934C5.1317 1.72064 5 2.10218 5 2.5ZM13.75 2.5C13.75 2.89782 13.8817 3.27936 14.1161 3.56066C14.3505 3.84196 14.6685 4 15 4C15.3315 4 15.6495 3.84196 15.8839 3.56066C16.1183 3.27936 16.25 2.89782 16.25 2.5C16.25 2.10218 16.1183 1.72064 15.8839 1.43934C15.6495 1.15804 15.3315 1 15 1C14.6685 1 14.3505 1.15804 14.1161 1.43934C13.8817 1.72064 13.75 2.10218 13.75 2.5ZM22.5 2.5C22.5 2.89782 22.6317 3.27936 22.8661 3.56066C23.1005 3.84196 23.4185 4 23.75 4C24.0815 4 24.3995 3.84196 24.6339 3.56066C24.8683 3.27936 25 2.89782 25 2.5C25 2.10218 24.8683 1.72064 24.6339 1.43934C24.3995 1.15804 24.0815 1 23.75 1C23.4185 1 23.1005 1.15804 22.8661 1.43934C22.6317 1.72064 22.5 2.10218 22.5 2.5Z"
                stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                shape-rendering="crispEdges" />
            </g>
            <defs>
              <filter id="filter0_d_2_6" x="0" y="0" width="30" height="13" filterUnits="userSpaceOnUse"
                color-interpolation-filters="sRGB">
                <feFlood flood-opacity="0" result="BackgroundImageFix" />
                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                  result="hardAlpha" />
                <feOffset dy="4" />
                <feGaussianBlur stdDeviation="2" />
                <feComposite in2="hardAlpha" operator="out" />
                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0" />
                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_2_6" />
                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_2_6" result="shape" />
              </filter>
            </defs>
          </svg>
        </i>

        <!-- Menu -->
        <ul class="flex flex-col bg-white shadow-base p-1 rounded text-xs" menuContent>
          <ng-container>
            <!-- Edit -->
            <li class="inline-flex items-center px-3 py-2 cursor-pointer rounded hover:bg-background-2">
              <fa-icon class="mr-2" [icon]="faPen"></fa-icon>
              <span class="whitespace-nowrap"> Edit</span>
            </li>

            <!-- Complete -->
            <li (click)="openDeletePost()"
              class="inline-flex items-center px-3 py-2 cursor-pointer rounded hover:bg-background-2">
              <fa-icon class="mr-2" [icon]="faTrash"></fa-icon>
              <span class="whitespace-nowrap"> Delete</span>
            </li>
          </ng-container>
        </ul>
      </app-menu>
    </div>
  </section>
</div>